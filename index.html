<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>index</title>
  </head>
  <script src="painter.js"></script>

  <body>
    <canvas id="c" height="300" width="300"></canvas>
  </body>
  <script>
    const cvs = document.getElementById("c");
    const ctx = cvs.getContext("2d");

    const data = {
      xPadding: 200,
      yPadding: 10,
      globalStyle: {
        background: "white",
        foreground: "black",
        borderColor: "blue",
        borderWidth: 5,
        font: "20px Calibri",
        padding: 10,
        radius: 10,
      },
      connectionStyle: {
        width: 3,
        color: "black",
      },
      node: {
        content: "main node",
        children: [
          {
            content: "child1",
            hotSpot: {
              action: "draw",
            },
            children: [
              {
                connectionStyle: {
                  width: "2",
                  color: "green",
                },
                content: "level3\nnew line",
                children: [
                  {
                    content: "with style",
                    style: {
                      background: "#1e1e1e",
                      foreground: "white",
                      borderColor: "#9cdcfe",
                      borderWidth: "2",
                      font: "20px Calibri",
                      padding: 10,
                      radius: 20,
                    },
                    image: {
                      src:
                        "https://pic2.zhimg.com/v2-4e96f1110cb872407e837d4fc1440f96_1440w.jpg?source=172ae18b",
                      height: 100,
                      width: 100,
                      padding: { top: 10, right: 0, bottom: -5, left: 10 },
                    },
                  },
                  {
                    content: "3-1yyy",
                  },
                  {
                    content: "3-11111",
                  },
                  {
                    content: "3-1",
                  },
                  {
                    content: "3-1",
                  },
                  {
                    content: "3-1",
                  },
                  {
                    content: "3-1",
                    bg: "",
                  },
                ],
              },
              {
                content: "level3",
              },
              {
                content: "level3",
              },
            ],
          },
          {
            content:
              "child2\nnew line\nnew line\nnew line\nnew line\nnew line\nnew line\nnew line\nnew line",
            children: [
              {
                content: "2-1",
              },
              {
                content: "2-2",
              },
            ],
          },
          {
            content: "child3",
            children: [
              {
                content: "3-1",
              },
            ],
          },
        ],
      },
    };

    const p = new painter();
    const d = p.build(ctx, data);
    cvs.height = d.treeHeight + 100;
    console.log(d);
    cvs.width = window.innerWidth;
    p.build(ctx, data);

    let currentHotspot;

    document.getElementById("c").onmousemove = (e) => {
      currentHotspot = p.getCurrentHotSpot({ x: e.x, y: e.y });
      if (currentHotspot != undefined) {
        document.getElementById("c").style.cursor = "pointer";
      } else {
        document.getElementById("c").style.cursor = "default";
      }
    };
    document.getElementById("c").onclick = () => {
      console.log(currentHotspot);
    };
  </script>
</html>
